@page "/u/reset-password"

@if (Token.IsEmpty())
{
    <MudAlert Severity="Severity.Error" Variant="Variant.Filled">链接已失效</MudAlert>
}
else
{
    <MudContainer MaxWidth="MaxWidth.Small" Class="mt-16">
        <MudPaper Elevation="10" Class="pa-8">
            <MudText Typo="Typo.h4" Class="mb-4" Align="Align.Center">设置密码</MudText>

            <MudPasswordField @bind-Value="NewPassword" Label="新密码" Variant="Variant.Outlined" FullWidth="true" Type="password" Class="mb-4"
                              Error="@_passwordError" ErrorText="@_passwordErrorText" />

            <MudPasswordField @bind-Value="ConfirmPassword" Label="确认新密码" Variant="Variant.Outlined" FullWidth="true" Type="password" Class="mb-4"
                              Error="@_confirmPasswordError" ErrorText="@_confirmPasswordErrorText" />

            <MudLoadingButton @bind-Loading="_loading"
                              OnClick="ResetPasswordAsync"
                              AutoDelay="null"
                              Color="Color.Primary"
                              Variant="Variant.Filled"
                              FullWidth="true">
                设置密码
            </MudLoadingButton>

            <MudText Typo="Typo.body2" Class="mt-4" Align="Align.Center">
                <MudLink Href="/u/login" Color="Color.Primary">返回登录</MudLink>
            </MudText>
        </MudPaper>
    </MudContainer>
}